---
layout: post
title: curlftpfsとrsyncでOperation not supported (95)がでちゃった時の対処法
date: 2014-03-26 00:18:08.000000000 +09:00
categories:
- web-dev
- 日記
tags: []
status: publish
type: post
published: true
meta:
  _title: curlftpfsとrsyncでOperation not supported (95)がでちゃった時の対処法
  _id: '1450'
  _edit_last: '1'
  _wpcom_is_markdown: '1'
author:
  login: admin
  email: hiroki@hrkd.net
  display_name: admin
  first_name: ''
  last_name: ''
---
<p>下記の用途なら、ふつーに<a href="https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+FTP+Plugin">Publish Over FTP Plugin</a>使えばいいっぽいじゃん。。。（14/05/21）</p>
<hr />
<p>jenkinsを使って、FTP接続しかできないレンタルサーバーなんかにもデプロイをしたいとき、</p>
<ul>
<li>jenkinsのgithub plugin</li>
<li>curlftpfs</li>
<li>rsync</li>
</ul>
<p>こいつらがあれば、githubにプッシュした時にレンタルサーバーの内容も最新にできるだろうと思ってたら、</p>
<p><code>rsync: mkstemp "/mnt/ftp/*********" failed: Operation not supported (95)</code></p>
<p>みたいなエラーが出て同期が取れない。しばらく解決方法を探してても無かったんだけど、やっと発見。</p>
<p><a href="http://asenov.eu/2013/04/rsync-operation-not-supported-95/">http://asenov.eu/2013/04/rsync-operation-not-supported-95/</a><br />
ロシア語のページだけど、コマンド見ればわかる。</p>
<p><code>mkdir -p /tmp/rsync_tmp/</code><br />
<code>rsync -auvz --temp-dir=/tmp/rsync_tmp /media/remote/ftp_mounted_system/folder  ~/from_remote</code></p>
<p>つまり、--temp-dirオプションで、一時ファイルの保存先を別に確保すれば大丈夫のようだ。</p>
